# API对接与镜像拉取规则（智能内容创作平台）

## 一、API对接规范

- 所有外部服务（如AI模型、素材库、OAuth、支付等）需在 docs/api/ 目录编写详细接口文档。
- 对接前需在项目规格书内明确用途、依赖、数据流、鉴权方式。
- 接口文档包括：请求方式、路径、参数、返回数据结构、错误码、示例。
- 对接流程需包含Mock测试方案，异常场景覆盖率≥90%。
- 接口变更需同步到 changelog/ 目录，通知相关端口开发人员。
- API Key、OAuth、令牌等敏感信息存储于 .env，不得进代码仓库。
- 自动生成API SDK或调用脚本，命名规范、注释齐全。

## 二、镜像拉取与管理

- 所有AI模型、第三方服务、依赖库均需采用容器或镜像分发（如Docker）。
- 镜像拉取脚本存放于 scripts/mirror/ 目录，支持版本选择与安全校验（SHA256）。
- 镜像源需备案，优先选用官方或可信社区源。
- 定期拉取/更新镜像，自动检测新版本并通知。
- 镜像拉取异常自动生成修复任务，并记录到 logs/mirror/ 。
- 镜像使用权限按项目角色控制，非法拉取自动告警。

## 三、自动化与安全

- 对接和拉取流程均需自动化脚本驱动，支持命令行与CI/CD调度。
- 所有敏感配置和密钥自动加密，权限最小化原则。
- 日志、异常、变更自动归档，供团队复盘和审计。